@{
    string SMaxPage = ViewBag.MaxPage.ToString();
    string Controler = ViewBag.Controler;
    int Genreid = ViewBag.GenreId;

    if (ViewBag.MaxPage < 10)
    {
        <div class="pagenav" align="center">
            <ul>
                @for (int i = 0; i < ViewBag.CurPage; i++)
                {
                <li>@Html.ActionLink(i.ToString(), "Index", "Genre", new { genreid = ViewBag.GenreId, page = i }, null)</li>
                }
                <li><span>@ViewBag.CurPage</span></li>

                @for (int i = ViewBag.CurPage + 1; i < ViewBag.MaxPage+1; i++)
                {
                    <li>@Html.ActionLink(i.ToString(), "Index", "Genre", new { genreid = ViewBag.GenreId, page = i }, null)</li>
                }

            </ul>
        </div>

        return;
    }

    <div class="pagenav" align="center">
        <ul>

            @if (ViewBag.CurPage > 0)
            {
                <li>
                    @Html.ActionLink("Назад", "Index", "Genre",
                        new { genreid = ViewBag.GenreId, page = ViewBag.CurPage - 1 }, null)
                </li>

            }
            else
            {
                <li><span>Назад</span></li>
            }


            @if (ViewBag.CurPage <= 5)
            {
                for (int i = 0; i < ViewBag.CurPage; i++)
                {
                    <li>@Html.ActionLink(i.ToString(), "Index", "Genre", new { genreid = ViewBag.GenreId, page = i }, null)</li>
                }

                <li><span>@ViewBag.CurPage</span></li>

                for (int i = ViewBag.CurPage + 1; i < 10; i++)
                {
                    <li>@Html.ActionLink(i.ToString(), "Index", "Genre", new { genreid = ViewBag.GenreId, page = i }, null)</li>
                }

                <li><span>...</span></li>

                <li>@Html.ActionLink(SMaxPage, "Index", "Genre", new { genreid = ViewBag.GenreId, page = ViewBag.MaxPage }, null)</li>
            }

            @if (ViewBag.CurPage > 5 && ViewBag.CurPage < ViewBag.MaxPage - 5)
            {

                <li>@Html.ActionLink("0", "Index", "Genre", new { genreid = ViewBag.GenreId, page = 0 }, null)</li>
                <li><span>...</span></li>
                for (int i = ViewBag.CurPage - 4; i < ViewBag.CurPage; i++)
                {
                    <li>@Html.ActionLink(i.ToString(), "Index", "Genre", new { genreid = ViewBag.GenreId, page = i }, null)</li>
                }

                <li><span>@ViewBag.CurPage</span></li>

                for (int i = ViewBag.CurPage + 1; i < ViewBag.CurPage + 5; i++)
                {
                    <li>@Html.ActionLink(i.ToString(), "Index", "Genre", new { genreid = ViewBag.GenreId, page = i }, null)</li>
                }
                <li><span>...</span></li>
                <li>@Html.ActionLink(SMaxPage, "Index", "Genre", new { genreid = ViewBag.GenreId, page = ViewBag.MaxPage }, null)</li>
            }


            @if (ViewBag.CurPage > ViewBag.MaxPage - 6)
            {
                <li>@Html.ActionLink("0", "Index", "Genre", new { genreid = ViewBag.GenreId, page = 0 }, null)</li>
                <li><span>...</span></li>
                for (int i = ViewBag.MaxPage - 8; i < ViewBag.CurPage; i++)
                {
                    <li>@Html.ActionLink(i.ToString(), "Index", "Genre", new { genreid = ViewBag.GenreId, page = i }, null)</li>
                }

                <li><span>@ViewBag.CurPage</span></li>

                for (int i = ViewBag.CurPage + 1; i < ViewBag.MaxPage + 1; i++)
                {
                    <li>@Html.ActionLink(i.ToString(), "Index", "Genre", new { genreid = ViewBag.GenreId, page = i }, null)</li>
                }

            }


            @if (ViewBag.CurPage < ViewBag.MaxPage)
            {
                <li>
                    @Html.ActionLink("Вперед", "Index", "Genre",
                        new { genreid = ViewBag.GenreId, page = ViewBag.CurPage + 1 }, null)
                </li>
            }
            else
            {
                <li><span>Вперед</span></li>
            }


        </ul>


    </div>
}